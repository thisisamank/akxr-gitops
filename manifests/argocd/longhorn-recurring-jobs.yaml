
---
# System Backup: Daily at 2 AM
# Backs up Longhorn system state (volumes, settings, recurring jobs)
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: system-backup-daily
  namespace: longhorn-system
spec:
  task: system-backup
  cron: "0 2 * * *"  # Daily at 2 AM UTC
  retain: 7  # Keep 30 system backups
  concurrency: 1
  labels: {}
  groups: []
  parameters:
    volume-backup-policy: if-not-present

---
# Daily Volume Backups: Daily at 3 AM
# Backs up all volumes EXCEPT Immich volumes
# Immich is excluded due to storage costs (512Gi+ library volume)
apiVersion: longhorn.io/v1beta2
kind: RecurringJob
metadata:
  name: backup-daily
  namespace: longhorn-system
spec:
  task: backup
  cron: "0 3 * * *"  # Daily at 3 AM UTC
  retain: 7  # Keep 30 days of daily backups
  concurrency: 2
  labels:
    backup-tier: daily
  groups:
    - daily

